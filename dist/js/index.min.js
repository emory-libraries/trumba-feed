Vue.component("trumba-feed",{template:"#trumba-feed",props:["count","feed","calendar","cap","date"],data:function(){return{items:[]}},methods:{limit:function(t,e){return e?t.slice(0,e):t}},filters:{feedID:function(t){return t.substring(t.lastIndexOf("/")+1,t.indexOf(".json"))}},created:function(){var t=this;$.get("php/proxy.php?url="+this.feed).done(function(e){t.items=JSON.parse(e)})}}),Vue.component("trumba-item",{template:"#trumba-item",props:["item","calendar","cap","date"],data:function(){return{item:{}}},filters:{date:function(t,e){return e?moment(t).format(e):t}},methods:{datetime:function(t,e,n){var r=[moment(t),moment(e)],o=moment(),a=function(t){var e=t,r=/([^A-Za-z0-9])/g,o=["Jan","Feb","Mar","Apr","Jun","Jul","Oct","Nov","Dec"],a=["Su","Sun","Mo","Mon","Tu","Tue","We","Wed","Th","Thu","Fr","Fri"];return n.period&&(!0===n.period.day&&(e=e.split(r).map(function(t){return a.indexOf(t)>-1?t+".":t}).join("")),!0===n.period.month&&(e=e.split(r).map(function(t){return o.indexOf(t)>-1?t+".":t}).join(""))),e};return"end"==n.use?a(r[1].format(n.format)):"start"==n.use?a(r[0].format(n.format)):r[0].isBefore(o)&&r[1].isAfter(o)?(0===r[1].hour()&&0===r[1].minute()&&r[1].subtract(1,"minute"),a(r[1].format(n.through))):0===r[1].diff(r[0],"days")?r.map(function(t,e){return a(t.format(n.time[e]))}).join(" - "):r[1].diff(r[0],"days")>=1?r.map(function(t,e){return a(t.format(n.day[e]))}).join(" - "):r.map(function(t,e){return a(t.format(n.format))}).join(" - ")},truncate:function(t,e,n){var r=this;if(e&&e<=t.length){for(var o=t.match(/(<.+?>)|(&.+?;)|(\S|\s)/g),a=0,u="",i=0;a<e;){var m=o[i];u+=m,/<(?!br).+?>/.test(m)||a++,i++}return r.truncated=!0,u+(n||"...")}return r.truncated=!1,t}}}),[].forEach.call(document.querySelectorAll(".trumba"),function(t){new Vue({el:t})});